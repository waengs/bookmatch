<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Book Reading Challenge</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Star Rating CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-star-rating/4.0.6/css/star-rating.min.css"
        rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
        integrity="sha512-xrJwNVT4kqb61t0Fm5d5t0hwuOf3anIhjVkIO3lBu2XtPAI3wvb8cBMhLqUn1T6aIfKImL4avL2thaaJyIRcZQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    <style>
        /* Custom CSS to adjust the star rating appearance */
        .rating-container .rating-stars {
            font-size: 24px;
            /* Adjust the font size to change star size */
        }

        .rating-container .rating-stars .rating-star {
            color: #ffd700;
            /* Set the color of the stars (e.g., yellow) */
        }
    </style>
</head>

<body>
  <!--This Is The Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">
      <a class="navbar-brand mr-4" href="#">BookMatch</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30">
            <path stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10"
              d="M4 7h22M4 15h22M4 23h22" />
          </svg>
        </span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item active">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="education.html">Education</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="fiction.html">Fiction</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="community.html">Community</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="cart.html">
              <button class="btn cart-button">
                <i class="fas fa-shopping-cart cart-icon"></i>
                <span class="cart-label">Cart</span>
              </button>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
    <div class="container-fluid py-2">
        <h1>Book Reading Challenge</h1>
        <div class="container my-5">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card animate__animated animate__fadeInDown" data-mdb-animation-on-scroll="repeat">
                        <div class="card-body">
                            <p class="card-text animate__animated">Embark on a transformative journey to boost your
                                reading
                                comprehension and literacy skills by selecting and summarizing ten diverse books. Engage
                                with a variety
                                of genres, from classic literature to contemporary fiction, and explore different
                                cultures,
                                perspectives, and themes. The challenge aims to deepen your understanding of
                                storytelling, enhance
                                critical thinking, and enrich your vocabulary while fostering a love for reading.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex flex-row flex-nowrap" id="bookList" style="overflow:auto">
            <!-- Book cards will go here -->
        </div>
    </div>
    <h2>Your reviews:</h2>
    <div class="container my-5" id="bookSummaries">
        <!-- Reviews and summaries will go here -->
    </div>
    <div id="progress">
        <div class="col-lg-12">
            Progress report: <br>
            You have read ---- words! <br>
            Fun fact! The average time to read that many words is ---- minutes!
        </div>
    </div>

    <!-- Modal for rating and summary -->
    <div class="modal fade" id="ratingModal" tabindex="-1" role="dialog" aria-labelledby="ratingModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ratingModalLabel">Rate This Book</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="row">
                            <div class="col-sm-12">
                                <h4>Rate the book:</h4>
                                <input type="number" id="ratingInput" name="rating" min="1" max="5">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <div class="rating">
                                    <span class="star" id="star1">★</span>
                                    <span class="star" id="star2">★</span>
                                    <span class="star" id="star3">★</span>
                                    <span class="star" id="star4">★</span>
                                    <span class="star" id="star5">★</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="review">Review (at least 100 words):</label>
                            <textarea class="form-control" id="review" rows="6" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="saveRating">Save</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
 
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap JS and jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Bootstrap Star Rating JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-star-rating/4.0.6/js/star-rating.min.js"></script>
    <script src="js/addons/rating.js"></script>

    <!-- Your custom JavaScript -->
    <script>
        $(document).ready(function () {
            const books = [
                {
                    title: "Book 1",
                    author: "Author 1",
                    image: "#",
                    link: "https://example.com/book1"
                },
                {
                    title: "Book 2",
                    author: "Author 2",
                    image: "#",
                    link: "https://example.com/book2"
                },
                {
                    title: "Book 3",
                    author: "Author 3",
                    image: "#",
                    link: "https://example.com/book3"
                },
                {
                    title: "Book 4",
                    author: "Author 4",
                    image: "#",
                    link: "https://example.com/book4"
                },
                {
                    title: "Book 5",
                    author: "Author 5",
                    image: "#",
                    link: "https://example.com/book5"
                },
                {
                    title: "Book 6",
                    author: "Author 6",
                    image: "#",
                    link: "https://example.com/book6"
                },
                {
                    title: "Book 7",
                    author: "Author 7",
                    image: "#",
                    link: "https://example.com/book7"
                },
                {
                    title: "Book 8",
                    author: "Author 8",
                    image: "#",
                    link: "https://example.com/book8"
                },
                {
                    title: "Book 9",
                    author: "Author 9",
                    image: "#",
                    link: "https://example.com/book9"
                },
                {
                    title: "Book 10",
                    author: "Author 10",
                    image: "#",
                    link: "https://example.com/book10"
                },
                // Add more book objects here
            ];

            function generateBookCards() {
        const bookList = $("#bookList");
        bookList.empty();

        books.forEach(book => {
            const card = $("<div>").addClass("col-md-4")
                .append($('<div class="card" style="width: 18rem;">')
                    .append($("<div>").addClass("card-body")
                        .append($("<h5>").addClass("card-title").text(book.title))
                        .append($("<p>").addClass("card-text").text("Author: " + book.author))
                        .append($("<img>").addClass("card-img-top").attr("src", book.image).attr("alt", book.title))
                        .append($("<a>").addClass("btn btn-primary").attr("href", book.link).attr("target", "_blank").text("Read"))
                        .append($("<button>").addClass("btn btn-success finishReading").text("Finish Reading"))
                        .append($("<button>").addClass("btn btn-success editReview").text("Edit").hide())
                    )
                );
            bookList.append(card);
        });
    }

            generateBookCards();

            // Event delegation for handling "Finish Reading" button click
            $("#bookList").on("click", ".finishReading", function () {
                const bookTitle = $(this).closest(".card-body").find(".card-title").text();
                $("#ratingModal .modal-title").text(`Rate "${bookTitle}"`);
                $("#ratingModal").modal("show");
            });

            $("#bookList").on("click", ".editReview", function () {
                const bookTitle = $(this).closest(".card-body").find(".card-title").text();
                $("#ratingModal .modal-title").text(`Rate "${bookTitle}"`);
                $("#ratingModal").modal("show");
            });

            $('.star').on('click', function () {
                var selectedStar = $(this).attr('id').substring(4); // Extract the number from the star ID
                $('.star').removeClass('filled');

                for (var i = 1; i <= selectedStar; i++) {
                    $('#star' + i).addClass('filled');
                }

                $('#ratingInput').val(selectedStar); // Set the value of the input field to the selected rating
            });

            $('#ratingInput').on('change', function () {
                var rating = $(this).val();
                $('.star').removeClass('filled');

                for (var i = 1; i <= rating; i++) {
                    $('#star' + i).addClass('filled');
                }
            });

            $("#saveRating").on("click", function () {
                var rating = $("#ratingInput").val();
                var review = $("#review").val();
                const bookTitle = $("#ratingModal .modal-title").text().replace('Rate "', '').replace('"', '');
                const bookId = bookTitle.replace(' ', '_');
                
                function createReview() {
                    let accordion = $(`<div class="accordion accordion-flush" id="${bookId}"></div>`);
                    let accordion_header = $(`
                        <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-toggle="collapse" data-target="#${bookId}_review" aria-expanded="false" aria-controls="flush-collapseOne">
                            ${bookTitle} 
                        </button>
                        </h2>
                    `);
                    let accordion_body = $(`
                        <div id="${bookId}_review" class="accordion-collapse collapse" data-parent="#${bookId}">
                            ${rating}/5 <br> ${review}
                        </div>
                    `);

                    // Add accordion to display book review and rating
                    accordion.append(accordion_header, accordion_body);
                    $('#bookSummaries').append(accordion);

                    // Change "Finish Reading" button
                    $(`#finish_reading_${bookId}`).hide();

                    // Show edit button
                    $(`#edit_review_${bookId}`).show();
                }

                function editReview() {
                    var rating = $("#ratingInput").val();
                    var review = $("#review").val();

                    $(`#${bookId}_review`).html(`${rating}/5 <br> ${review}`)
                }
                
                if ($(`#${bookId}_review`).length === 0) {
                    createReview();
                }
                else {
                    editReview();
                }

                // Clear the modal inputs
                $("#ratingInput").val("");
                $("#review").val("");

                // Close the modal
                $("#ratingModal").modal("hide");
            });

        });

    </script>

</body>
</html>
